(window["webpackJsonpanon-feedback"]=window["webpackJsonpanon-feedback"]||[]).push([[0],{130:function(e,t,a){e.exports={mainWrapper:"Layout_mainWrapper__2PVMO"}},153:function(e,t,a){e.exports=a(215)},158:function(e,t,a){},20:function(e,t,a){e.exports={wrapper:"ThreadComponent_wrapper__12d69",answersCount:"ThreadComponent_answersCount__2Ip58",heading:"ThreadComponent_heading__N59bB",hovered:"ThreadComponent_hovered__tmw82",description:"ThreadComponent_description__UtBz-",counterWrapper:"ThreadComponent_counterWrapper__mYNOB",headingWrapper:"ThreadComponent_headingWrapper__3AgFC",subsWrapper:"ThreadComponent_subsWrapper__3WSzh",divider:"ThreadComponent_divider__1xEsl",btn:"ThreadComponent_btn__2a6m3",threadFullWrapper:"ThreadComponent_threadFullWrapper__1LVL2",dividerWrapper:"ThreadComponent_dividerWrapper__u1GHJ",comments:"ThreadComponent_comments__2FLse"}},215:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(10),o=a.n(i),c=(a(158),a(12)),s=a(15),l=a(30),u=a(31),d=a(32),m=a(36),h=(a(175),a(47)),p=a(27),f=a(46),b=a(2),v=a(113),g=a(257),E=a(262),_=a(117),T=a.n(_),C=a(271),O=a(270),k=a(21),x=a(255),y=a(261),w=a(272),j=a(258),N=a(259),I=a(67),S=a(114),D=a.n(S),A=a(217),W=a(18),R=a.n(W),U=a(48),H=Object(v.a)((function(e){return{root:{width:"80%",height:"70vh"},appBar:{position:"relative",backgroundColor:"#424b5f",boxShadow:"none"},title:{marginLeft:e.spacing(2),textTransform:"capitalize",flex:1},container:{display:"flex",flexWrap:"wrap",padding:"30px 40px",flexDirection:"column",flex:1},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:"100%",whiteSpace:"pre-line"},smallTextField:{width:200},nickNameWrapper:{display:"flex",flexDirection:"column"},formControl:{margin:0},controlBtns:{marginTop:"16px",marginLeft:"auto",textTransform:"capitalize"},button:{fontWeight:"bold",boxShadow:"none",marginLeft:"16px",fontSize:"0.7rem"},submitBtn:{backgroundColor:"#65c178",fontWeight:"bold",color:"white","&:hover":{backgroundColor:"#159776"}}}})),P=r.a.forwardRef((function(e,t){return r.a.createElement(A.a,Object.assign({direction:"up",ref:t},e))})),L=a(9),B=a(64),F=a.n(B),M={base:"/users",login:"/users/login"},z={base:"/threads",like:"/threads/like",dislike:"/threads/dislike"},V=function e(){Object(c.a)(this,e)};V.signIn=function(){return window.gapi.auth2.getAuthInstance().signIn()},V.signOut=function(){return window.gapi.auth2.getAuthInstance().signOut()};var Y=new function e(){var t=this;Object(c.a)(this,e),this.composeUrl=function(e){return"".concat(t._url).concat(e)},this.get=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.composeUrl(e),r=F.a.get(n,{params:a}).then((function(e){return e})).catch((function(e){return Promise.reject({error:e})}));return r},this.post=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.composeUrl(e),r=F.a.post(n,a).then((function(e){return e})).catch((function(e){return Promise.reject({error:e})}));return r},this.put=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.composeUrl(e),r=F.a.put(n,a).then((function(e){return e})).catch((function(e){return Promise.reject({error:e})}));return r},this.patch=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.composeUrl(e),r=F.a.patch(n,a).then((function(e){return e})).catch((function(e){return Promise.reject({error:e})}));return r};var a=Object({NODE_ENV:"production",PUBLIC_URL:"/anon-feedback"}).REACT_APP_ENV;this._url="development"===a?"http://localhost:5000":"add here url for prod"},G=new function e(t){var a=this;Object(c.a)(this,e),this.loginUser=function(){return V.signIn().then((function(e){return a._adapter.post(a._loginUrl,e).then((function(e){return e.data}))}))},this.signOut=function(){return V.signOut()},this._adapter=t,this._baseUrl=M.base,this._loginUrl=M.login}(Y),q=new function e(t){var a=this;Object(c.a)(this,e),this.getThreads=function(e){return a._adapter.get(a._baseUrl,e).then((function(e){return e.data}))},this.getThread=function(e){return a._adapter.get("".concat(a._baseUrl,"/").concat(e)).then((function(e){return e.data}))},this.createThread=function(e){return a._adapter.post("".concat(a._baseUrl,"/create"),e).then((function(e){return e.data}))},this.updateThread=function(e){return a._adapter.patch("".concat(a._baseUrl,"/update"),e).then((function(e){return e.data}))},this.subscribeToThread=function(e){return a._adapter.patch("".concat(a._baseUrl,"/subscribe"),e).then((function(e){return e.data}))},this.unsubscribeFromThread=function(e){return a._adapter.patch("".concat(a._baseUrl,"/unsubscribe"),e).then((function(e){return e.data}))},this.createComment=function(e){return a._adapter.patch("".concat(a._baseUrl,"/create-comment"),e).then((function(e){return e.data}))},this.updateComment=function(e){return a._adapter.patch("".concat(a._baseUrl,"/update-comment"),e).then((function(e){return e.data}))},this.like=function(e){var t=e.id,n=e.userId;return a._adapter.patch("".concat(a._likeUrl),{id:t,userId:n}).then((function(e){return e.data}))},this.dislike=function(e){var t=e.id,n=e.userId;return a._adapter.patch("".concat(a._dislikeUrl),{id:t,userId:n}).then((function(e){return e.data}))},this._adapter=t,this._baseUrl=z.base,this._likeUrl=z.like,this._dislikeUrl=z.dislike}(Y),J=function e(t){var a=t.title,n=t.text,r=t.authorId,i=t.username;Object(c.a)(this,e),this.title=a,this.text=n,this.users=[{userId:r,username:i}],this.author={userId:r,username:i},this.subscribers=[{userId:r}]};function X(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Z(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?X(a,!0).forEach((function(t){Object(L.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):X(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Q=function(e){return{type:"UPDATE_THREAD_FIELD",payload:e}},K=function(){return{type:"RESET_THREAD"}},$=function(){return function(e,t){var a=t(),n=a.threadsReducer.threadData,r=a.userReducer.user._id,i=new J(Z({},n,{authorId:r}));return q.createThread(i).then((function(e){return m.NotificationManager.success("Your thread was created","Success"),e}))}},ee=function(){return function(e,t){var a=t().threadsReducer.threadData,n=(a.username,Object(b.a)(a,["username"]));return q.updateThread(n).then((function(e){return m.NotificationManager.success("Your thread was edited","Success"),e}))}},te=function(e){var t=e.nickName,a=e.commentText,n=e.repliedTo;return function(e,r){var i=r(),o=i.userReducer.user._id,c=i.threadsReducer,s=c.selectedThread._id,l=c.selectedThread.users.find((function(e){return e.username===n})),u={userId:o,threadId:s,username:t,text:a,repliedToUser:l};return q.createComment(u).then((function(t){e(re(t)),m.NotificationManager.success("Your comment was created","Success")}))}},ae=function(e){var t=e.commentId,a=e.text;return function(e,n){var r={threadId:n().threadsReducer.selectedThread._id,commentId:t,text:a};return q.updateComment(r).then((function(t){m.NotificationManager.success("Your comment was updated","Success"),e(re(t))}))}},ne=function(e){return{type:"SET_THREAD_DATA",payload:e}},re=function(e){return{type:"SET_SELECTED_THREAD",payload:e}},ie=function(e){return{type:"CHANGE_THREAD",payload:e}},oe=function(e){return function(t){q.getThread(e).then((function(e){return t(re(e))}))}},ce=function(e){return function(t){q.subscribeToThread(e).then((function(e){m.NotificationManager.info("subscribed to this thread","Info"),t(re(e))}))}},se=function(e){return function(t){q.unsubscribeFromThread(e).then((function(e){m.NotificationManager.info("unsubscribed from this thread","Info"),t(re(e))}))}},le=function(){return function(e){q.getThreads().then((function(t){return e({type:"SET_ALL_THREADS",payload:t})}))}},ue=function(e){return function(t){var a=e.id,n=e.userId;q.like({id:a,userId:n}).then((function(e){m.NotificationManager.success("You've liked thread","Success"),t(ie({id:a,thread:Z({},e)}))}))}},de=function(e){return function(t){var a=e.id,n=e.userId;q.dislike({id:a,userId:n}).then((function(e){m.NotificationManager.success("You've disliked thread","Success"),t(ie({id:a,thread:Z({},e)}))}))}},me=Object(k.d)(h.f,Object(p.b)((function(e){return{threadData:e.threadsReducer.threadData}}),(function(e){return{actions:Object(k.b)({updateThreadField:Q,resetThreadFields:K,createThread:$,editThread:ee,setSelectedThread:re},e)}})))((function(e){var t=e.history,a=e.action,i=e.isOpen,o=e.onClose,c=e.actions,s=c.updateThreadField,l=c.resetThreadFields,u=c.createThread,d=c.editThread,m=c.setSelectedThread,h=e.threadData,p=h.title,b=h.text,v=h.username,_=H(),T=Object(n.useState)(!1),C=Object(f.a)(T,2),k=C[0],S=C[1],A=function(e){var t=e.target,a=t.value,n=t.name;console.log(a.toString()),s({field:n,value:a})};return r.a.createElement("div",null,r.a.createElement(x.a,{fullWidth:!0,maxWidth:"md",open:i,onClose:o,TransitionComponent:P},r.a.createElement(g.a,{className:_.appBar},r.a.createElement(j.a,null,r.a.createElement(N.a,{edge:"start",color:"inherit",onClick:o,"aria-label":"close"},r.a.createElement(D.a,null)),r.a.createElement(I.a,{variant:"h6",className:_.title},a," Thread"))),r.a.createElement("div",{className:_.container},"create"===a&&r.a.createElement("div",{className:_.nickNameWrapper},r.a.createElement(O.a,{autoComplete:"off",id:"standard-basic",className:R()(_.textField,_.smallTextField),onChange:A,required:!0,value:v,name:"username",label:"Anon nick name"}),r.a.createElement(y.a,{className:_.formControl,control:r.a.createElement(w.a,{checked:k,onChange:function(){var e={dictionaries:[U.a,U.b],separator:" ",length:2},t=k?"":Object(U.c)(e);s({field:"username",value:t}),S(!k)},color:"primary"}),label:"Generate nick name for you?"})),r.a.createElement(O.a,{autoComplete:"off",required:!0,id:"standard-multiline-flexible",label:"Thread Title",rows:"2",multiline:!0,value:p,onChange:A,name:"title",className:_.textField,margin:"normal",variant:"outlined"}),r.a.createElement(O.a,{required:!0,autoComplete:"off",id:"standard-multiline-flexible",label:"Thread Description",multiline:!0,rows:"6",value:b,onChange:A,name:"text",className:_.textField,margin:"normal",variant:"outlined"}),r.a.createElement("div",{className:_.controlBtns},r.a.createElement(E.a,{variant:"contained",onClick:l,color:"secondary",className:_.button},"Reset"),r.a.createElement(E.a,{variant:"contained",onClick:function(){switch(a){case"edit":d().then((function(e){m(e),o()}));break;case"create":u().then((function(e){var a=e._id,n=t.push;m(e),n("/feed/".concat(a)),o()}));break;default:return}},className:R()(_.button,_.submitBtn)},a," Thread")))))})),he=a(61),pe=a.n(he),fe=Object(v.a)((function(e){return{autocomplete:{border:"none",input:{color:"white",padding:"0"},inputRoot:{height:"100%"},label:{color:"white"}},header:{backgroundColor:"#424b5f",display:"flex",flexDirection:"row",height:"70px",boxShadow:"none"},headerPlaceholder:{width:"100%",height:"70px"},search:{position:"relative",borderRadius:"5px",backgroundColor:"#424b5f",width:"100%",alignSelf:"center"},inputInput:{padding:"0",paddingLeft:"50px",transition:e.transitions.create("width"),width:"100%",height:"100%","&:focus, &:hover":{backgroundColor:"#3a4357",borderRadius:"5px"}},searchIcon:{width:"48px",height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1},textField:{display:"flex",color:"white",height:"100%",width:"100%","& input":{height:"100%",color:"white",padding:"0 0 0 40px !important"},"& label":{color:"white"}},labelRoot:{color:"white"},createThreadButton:{backgroundColor:"#65c178",fontSize:"0.7rem",fontWeight:"bold",color:"white","&:hover":{backgroundColor:"#159776"},width:"150px",height:"36px"}}})),be=Object(p.b)((function(e){return{threads:e.threadsReducer.threads}}))((function(e){var t=e.threads,a=Object(b.a)(e,["threads"]),n=fe();return r.a.createElement("div",{className:pe.a.searchWrapper},r.a.createElement("div",{className:n.search},r.a.createElement("div",{className:n.searchIcon},r.a.createElement(T.a,null)),r.a.createElement(C.a,{className:n.autocomplete,freeSolo:!0,onChange:function(e,t){console.log({e:e,a:t}),a.history.push("/feed/".concat(t._id))},classes:{inputRoot:n.inputRoot},autoSelect:!0,options:t,getOptionLabel:function(e){return e.title},renderInput:function(e){return r.a.createElement(O.a,Object.assign({},e,{margin:"none",variant:"outlined",classes:{root:n.textField},fullWidth:!0}))},renderOption:function(e){return r.a.createElement("div",{className:pe.a.link,to:"/feed/".concat(e._id)},e.title)}})))}));var ve=Object(h.f)((function(e){console.log({props:e});var t=fe(),a=Object(n.useState)(!1),i=Object(f.a)(a,2),o=i[0],c=i[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,{position:"fixed",className:t.header},r.a.createElement("div",{className:pe.a.logoWrapper},r.a.createElement("img",{className:pe.a.logo,src:"https://image.flaticon.com/icons/svg/2165/2165678.svg",alt:"logo"})),r.a.createElement(be,{history:e.history}),r.a.createElement("div",{className:pe.a.createThreadWrapper},r.a.createElement(E.a,{variant:"contained",onClick:function(){return c(!0)},className:t.createThreadButton},"create thread"))),r.a.createElement(me,{onClose:function(){return c(!1)},isOpen:o,action:"create"}),r.a.createElement("div",{className:t.headerPlaceholder}))})),ge=a(40),Ee=a(267),_e=a(266),Te=a(260),Ce=a(268),Oe=a(263),ke=a(265),xe=a(264),ye=a(85),we=a.n(ye),je=a(120),Ne=a.n(je),Ie=a(119),Se=a.n(Ie),De=Object(v.a)((function(e){return{root:{display:"flex"},appBar:{width:"calc(100%\xa0-\xa0".concat(240,"px)"),marginLeft:240},drawerPaper:{color:"white",top:"70px",backgroundColor:"#4f5a6e",width:"250px",border:"none"},content:{flexGrow:1,backgroundColor:e.palette.background.default,padding:e.spacing(3)},listIcon:{minWidth:"30px"}}})),Ae=[{text:"Personal\xa0Cabinet",path:"/cabinet",icon:r.a.createElement(Se.a,null)},{text:"My\xa0Feed",path:"/feed",icon:r.a.createElement(we.a,null)},{text:"Thread with id 1",path:"/feed/1",icon:r.a.createElement(we.a,null)},{text:"All\xa0Threads",path:"/",icon:r.a.createElement(Ne.a,null)}];function We(){var e=De();return r.a.createElement("div",{className:e.root},r.a.createElement(_e.a,null),r.a.createElement(Ee.a,{className:e.drawer,variant:"permanent",classes:{paper:e.drawerPaper},anchor:"left"},r.a.createElement(Te.a,{component:"nav"},Ae.map((function(t,a){var n=t.text,i=t.icon,o=t.path;return r.a.createElement(ge.b,{to:o,key:o},r.a.createElement(Oe.a,{button:!0,key:n},r.a.createElement(xe.a,{className:e.listIcon},i),"\xa0",r.a.createElement(ke.a,{primary:n})))}))),r.a.createElement(Ce.a,null)))}var Re=a(124),Ue=a.n(Re),He=a(20),Pe=a.n(He),Le=a(65),Be=a.n(Le),Fe=function(e){var t=e.username,a=void 0===t?"test":t,n=e.label;return r.a.createElement("div",{className:Be.a.threadAuthor},r.a.createElement("div",{className:Be.a.threadAuthorBox},a.slice(0,2)),r.a.createElement("div",{className:Be.a.authorInfo},r.a.createElement("span",null,a),!!n&&r.a.createElement("span",{className:Be.a.role},n)))},Me=a(122),ze=a.n(Me),Ve=a(121),Ye=a.n(Ve),Ge=a(42),qe=a.n(Ge),Je=function(e){var t=e.subscribersCount,a=e.dislikesCount,n=e.likesCount,i=e.isClickable,o=e.like,c=e.dislike,s=e.likeStatus,l=e.createdDate;return r.a.createElement("div",{className:qe.a.threadMetaInfo},t," subscribers",r.a.createElement("span",{className:qe.a.divider},"-"),l,r.a.createElement("span",{className:qe.a.divider},"-"),r.a.createElement("div",{onClick:i?function(){return o()}:null},r.a.createElement(Ye.a,{className:R()(qe.a.icon,Object(L.a)({},qe.a.active,"liked"===s))})," ",n," "),r.a.createElement("span",{className:qe.a.divider},"-"),r.a.createElement("div",{onClick:i?function(){return c()}:null},r.a.createElement(ze.a,{className:R()(qe.a.icon,Object(L.a)({},qe.a.active,"disliked"===s))})," ",a," "))},Xe=a(123),Ze=a.n(Xe),Qe=a(273),Ke=a(43),$e=a.n(Ke),et=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).state={isEditing:!1,text:""},a.toggleIsEditing=function(){var e=a.state,t=e.isEditing,n=e.text,r=a.props,i=r.comment,o=i.text,c=i._id,s=r.onUpdateComment;t?s({text:n,commentId:c}).then((function(){a.setState({isEditing:!t,text:""})})):a.setState({isEditing:!t,text:o})},a.editComment=function(e){var t=e.target.value;return a.setState({text:t})},a.resetIsEditing=function(){return a.setState({isEditing:!1})},a.renderButtons=function(){if(!a.props.editable)return null;var e=a.state.isEditing;return r.a.createElement("div",{className:e?$e.a.btnHolder:""},e&&r.a.createElement(E.a,{onClick:a.resetIsEditing,size:"small"},"Cancel"),r.a.createElement(E.a,{onClick:a.toggleIsEditing,color:"secondary",size:"small"},e?"Save":"Edit"))},a.constructAdditionalText=function(){var e=a.props,t=e.comment.wasEdited,n="";return e.isAuthorsComment&&(n="@thread author "),t&&(n+="(edited)"),n.trim()},a.repliedToHandler=function(){var e=a.props;(0,e.repliedToHandler)(e.comment.author.username)},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.comment,a=t.text,n=t.author.username,i=t.repliedToUser,o=e.userId,c=e.classes,s=this.state,l=s.isEditing,u=s.text;return r.a.createElement("div",{className:$e.a.comment},r.a.createElement("div",{className:$e.a.flexWrapper},r.a.createElement(Fe,{username:n,label:this.constructAdditionalText()}),this.renderButtons()),r.a.createElement("div",{className:R()($e.a.text,$e.a.leftShift)},!!i&&!l&&r.a.createElement(Qe.a,{variant:"outlined",className:c.chip,label:"@".concat(i.username),color:o===i.userId?"secondary":"primary"}),!l&&a,l&&r.a.createElement(O.a,{autoComplete:"off",id:"standard-multiline-flexible",label:"Edit your comment",multiline:!0,value:u,fullWidth:!0,onChange:this.editComment,variant:"outlined"})),r.a.createElement("div",{className:R()($e.a.flexWrapper,$e.a.leftShift)},r.a.createElement(Je,null),r.a.createElement(E.a,{color:"primary",onClick:this.repliedToHandler,variant:"outlined",size:"small"},"Reply")),r.a.createElement("div",{className:$e.a.divider}))}}]),t}(n.Component),tt=Ze()((function(){return{chip:{marginRight:"6px",height:"26px"}}}))(et),at=Object(v.a)((function(e){return{root:{width:"80%",height:"70vh"},chip:{marginLeft:"6px",height:"26px"},repliedToWrapper:{marginTop:"10px"},appBar:{position:"relative",backgroundColor:"#424b5f",boxShadow:"none"},title:{marginLeft:e.spacing(2),textTransform:"capitalize",flex:1},container:{display:"flex",flexWrap:"wrap",padding:"30px 40px",flexDirection:"column",flex:1},textField:{width:"100%"},smallTextField:{width:200},nickNameWrapper:{display:"flex",flexDirection:"column",marginTop:"10px"},formControl:{margin:0},controlBtns:{marginTop:"16px",marginLeft:"auto",textTransform:"capitalize",display:"flex",justifyContent:"flex-end"},button:{fontWeight:"bold",boxShadow:"none",marginLeft:"16px"},submitBtn:{backgroundColor:"#65c178",fontWeight:"bold",color:"white","&:hover":{backgroundColor:"#159776"}}}})),nt=function(e){var t=e.username,a=void 0===t?"":t,i=e.onCreateComment,o=e.repliedTo,c=e.onRepliedToReset,s=at(),l=Object(n.useState)(!!a),u=Object(f.a)(l,2),d=u[0],m=u[1],h=Object(n.useState)(a),p=Object(f.a)(h,2),b=p[0],v=p[1],g=Object(n.useState)(""),_=Object(f.a)(g,2),T=_[0],C=_[1],k=function(){C(""),m(!1)};return r.a.createElement("div",null,!a&&r.a.createElement("div",{className:s.nickNameWrapper},r.a.createElement(O.a,{autoComplete:"off",id:"standard-basic",className:R()(s.textField,s.smallTextField),onChange:function(e){var t=e.target.value;return v(t)},required:!0,value:b,name:"username",label:"Anon nick name"}),r.a.createElement(y.a,{className:s.formControl,control:r.a.createElement(w.a,{checked:d,onChange:function(){var e={dictionaries:[U.a,U.b],separator:" ",length:2},t=d?"":Object(U.c)(e);v(t),m(!d)},color:"primary"}),label:"Generate nick name for you?"})),o&&r.a.createElement("div",{className:s.repliedToWrapper},"Comment replied to",r.a.createElement(Qe.a,{label:"@".concat(o),onDelete:c,color:"primary",variant:"outlined",className:s.chip})),r.a.createElement(O.a,{required:!0,autoComplete:"off",id:"standard-multiline-flexible",label:"Your comment",multiline:!0,rows:"6",value:T,onChange:function(e){var t=e.target.value;return C(t)},name:"text",className:s.textField,margin:"normal",variant:"filled"}),r.a.createElement("div",{className:s.controlBtns},r.a.createElement(E.a,{variant:"outlined",onClick:k,className:s.button},"Reset"),r.a.createElement(E.a,{variant:"outlined",onClick:function(){c&&c(),i({nickName:b,commentText:T,repliedTo:o}).then(k)},color:"primary",className:R()(s.button)},"Create Comment")))},rt=function(){return r.a.createElement("p",null," Loading...")},it=function(){return Math.floor(10*Math.random())},ot="preview",ct="full",st=function(e){function t(e){var a;Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).onRepliedToReset=function(){return a.setState({repliedTo:""})},a.closeEditThread=function(){return a.setState({editThreadOpen:!1})},a.openEditThread=function(){var e=a.props,t=e.actions.setThreadData,n=e.thread;t({text:n.text,_id:n._id,title:n.title}),a.setState({editThreadOpen:!0})},a.renderPreviewThread=function(){var e=a.props.thread,t=e.author,i=(t=void 0===t?{}:t).username,o=e.subscribersCount,c=e.dislikesCount,s=e.likesCount,l=e.createdDate,u=e.commentsCount;return r.a.createElement(n.Fragment,null,r.a.createElement("div",null,r.a.createElement(Fe,{username:i}),a.renderThreadHeader(),r.a.createElement(Je,{subscribersCount:o,dislikesCount:c,likesCount:s,likeStatus:a.likeStatus(),createdDate:l})),r.a.createElement("div",{className:Pe.a.answersCount},r.a.createElement("div",{className:Pe.a.counterWrapper},r.a.createElement(Ue.a,null),u),r.a.createElement("span",null,"answer(s)")))},a.subscriptionHandler=function(){var e=a.props,t=e.actions,n=t.subscribeToThread,r=t.unsubscribeFromThread,i={threadId:e.thread._id,userId:e.userId};a.isSubscribed()?r(i):n(i)},a.isSubscribed=function(){var e=a.props,t=e.thread.subscribers,n=e.userId;return!!t.find((function(e){return e.userId===n}))},a.isAuthor=function(){var e=a.props;return e.thread.author.userId===e.userId},a.findUserInThread=function(){var e=a.props,t=e.userId;return e.thread.users.find((function(e){return e.userId===t}))},a.likeStatus=function(){var e=a.props,t=e.userId,n=e.thread,r=n.likesList,i=n.dislikesList;return r.find((function(e){return e.userId===t}))?"liked":i.find((function(e){return e.userId===t}))?"disliked":null},a.repliedToHandler=function(e){window.scrollTo(0,document.body.scrollHeight),a.setState({repliedTo:e})},a.renderThread=function(){var e=a.state,t=e.editThreadOpen,n=e.repliedTo,i=a.props,o=i.userId,c=i.thread,s=c._id,l=c.text,u=c.subscribersCount,d=c.dislikesCount,m=c.likesCount,h=c.commentsList,p=c.createdDate,f=c.author,b=(f=void 0===f?{}:f).userId,v=f.username,g=i.likeThread,_=i.dislikeThread,T=i.actions,C=T.onCreateComment,O=T.onUpdateComment,k=a.isSubscribed(),x=(a.findUserInThread()||{}).username;return r.a.createElement("div",{className:Pe.a.threadFullWrapper},r.a.createElement("div",{className:Pe.a.headingWrapper},r.a.createElement(Fe,{username:v}),a.isAuthor()&&r.a.createElement(E.a,{onClick:a.openEditThread,color:"secondary"},"Edit")),r.a.createElement("div",{className:Pe.a.divider}),a.renderThreadHeader(),r.a.createElement("div",{className:Pe.a.description},l),r.a.createElement("div",{className:Pe.a.subsWrapper},r.a.createElement(Je,{createdDate:p,subscribersCount:u,dislikesCount:d,likesCount:m,likeStatus:a.likeStatus(),dislike:_.bind(null,{id:s,userId:o}),like:g.bind(null,{id:s,userId:o}),isClickable:!0}),r.a.createElement(E.a,{className:Pe.a.btn,variant:"outlined",onClick:a.subscriptionHandler,color:k?"secondary":"primary"},k?"Unsubscribe":"Subscribe")),r.a.createElement("div",{className:Pe.a.dividerWrapper},"Total comments (",8,")"),r.a.createElement("div",{className:Pe.a.comments},h.map((function(e){return r.a.createElement(tt,{userId:o,onUpdateComment:O,editable:e.author.userId===o,comment:e,isAuthorsComment:e.author.userId===b,repliedToHandler:a.repliedToHandler})}))),r.a.createElement("div",{className:Pe.a.dividerWrapper},x?r.a.createElement("span",{className:Pe.a.userHighlight},x,","):""," Write your comment here"),r.a.createElement(nt,{repliedTo:n,onCreateComment:C,username:x,onRepliedToReset:a.onRepliedToReset}),r.a.createElement(me,{onClose:a.closeEditThread,isOpen:t,action:"edit"}))},a.renderThreadHeader=function(){var e=a.props.threadView,t=a.props.thread,n=t.title,i=void 0===n?"What to learn SWIFT or GO?":n,o=t._id;return r.a.createElement(ge.b,{to:"/feed/".concat(o)},r.a.createElement("div",{className:R()(Pe.a.heading,Object(L.a)({},Pe.a.hovered,e===ot))},i))};var i=e.threadView;return a.renderContent=i===ct?a.renderThread:a.renderPreviewThread,a.state={editThreadOpen:!1,repliedTo:""},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:Pe.a.wrapper},this.renderContent())}}]),t}(n.Component);st.defaultProps={threadView:ct,subscribersCount:it(),answersCount:it(),dislikesCount:it(),likesCount:it(),author:{}};var lt=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this.props;(0,e.actions.getThreadById)(e.match.params.id)}},{key:"componentDidUpdate",value:function(e){var t=e.match.params.id,a=this.props,n=a.actions.getThreadById,r=a.match.params.id;t!==r&&n(r)}},{key:"render",value:function(){var e=this.props,t=e.thread,a=e.actions,n=a.likeThread,i=a.dislikeThread;return t?r.a.createElement(st,Object.assign({likeThread:n,dislikeThread:i,threadView:"full"},this.props)):r.a.createElement(rt,null)}}]),t}(r.a.Component),ut=Object(p.b)((function(e){return{userId:e.userReducer.user._id,thread:e.threadsReducer.selectedThread}}),(function(e){return{actions:Object(k.b)({setThreadData:ne,subscribeToThread:ce,unsubscribeFromThread:se,getThreadById:oe,onCreateComment:te,onUpdateComment:ae,likeThread:ue,dislikeThread:de},e)}}))(lt),dt=a(19),mt=a(269),ht=a(127),pt=a.n(ht),ft=a(126),bt=a.n(ft),vt=a(125),gt=a.n(vt),Et=a(128),_t=a.n(Et),Tt=a(129),Ct=a.n(Tt),Ot=a(66),kt=a.n(Ot),xt="Newest",yt="Most Discussed",wt="Most Liked",jt=[{label:xt,icon:r.a.createElement(gt.a,null)},{label:wt,icon:r.a.createElement(bt.a,null)},{label:yt,icon:r.a.createElement(pt.a,null)}],Nt=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={sortBy:null,sortDirection:"DESC"},a.sortByChangeHandler=function(){return function(e){var t=e.currentTarget.name,n=a.state,r=n.sortBy,i=n.sortDirection;if(t===r){var o="ASC"===i?"DESC":"ASC";a.setState({sortDirection:o})}else a.setState({sortBy:t,sortDirection:"DESC"})}},a.getSortedThreads=function(){var e=a.state.sortBy,t=a.props.threads;switch(e){case xt:return Object(dt.a)(t).sort((function(e,t){return new Date(t.createdDate)-new Date(e.createdDate)}));case wt:return Object(dt.a)(t).sort((function(e,t){return t.likesCount-e.likesCount}));case yt:return Object(dt.a)(t).sort((function(e,t){return t.commentsCount-e.commentsCount}));default:return t}},a.isActive=function(e){return a.state.sortBy===e},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"renderThreads",value:function(){var e=this.state.sortDirection,t=this.getSortedThreads().map((function(e){return r.a.createElement(st,{key:e._id,threadView:"preview",thread:e})}));return"DESC"===e?t:t.reverse()}},{key:"renderButtons",value:function(){var e=this,t=this.state.sortDirection;return jt.map((function(a){var n=a.label,i=a.icon;return r.a.createElement(E.a,{key:n,onClick:e.sortByChangeHandler(),name:n,className:e.isActive(n)?kt.a.active:""},r.a.createElement("div",{className:kt.a.iconWrapper},i),n,r.a.createElement("div",{className:kt.a.iconWrapper},e.isActive(n)?"DESC"===t?r.a.createElement(_t.a,null):r.a.createElement(Ct.a,null):null))}))}},{key:"componentDidMount",value:function(){(0,this.props.actions.getAllThreads)()}},{key:"render",value:function(){var e=this.props.threads;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:kt.a.buttonContainer},r.a.createElement(mt.a,{size:"small","aria-label":"small outlined button group",color:"primary"},this.renderButtons())),e.length?this.renderThreads():r.a.createElement(rt,null))}}]),t}(r.a.Component),It=Object(p.b)((function(e){return{userId:e.userReducer.user._id,threads:e.threadsReducer.threads}}),(function(e){return{actions:Object(k.b)({getAllThreads:le},e)}}))(Nt),St=a(130),Dt=a.n(St),At=function(){return r.a.createElement("p",null,"Feed")},Wt=function(){return r.a.createElement("p",null,"Personal Cabinet")},Rt=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).loginHandler=function(){G.loginUser().then((function(e){return a.props.setUser(e)})).catch((function(e){return console.log(e)}))},a.logOutHandler=function(){return G.signOut().then((function(){return a.props.logOut()}))},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("button",{onClick:this.loginHandler},"Kek in")}}]),t}(r.a.Component);function Ut(e){var t=e.isUserLoggedIn,a=e.setUser;return t?r.a.createElement(r.a.Fragment,null,r.a.createElement(ve,null),r.a.createElement(We,null),r.a.createElement("div",{className:Dt.a.mainWrapper},r.a.createElement(h.c,null,r.a.createElement(h.a,{path:"/",exact:!0,component:It}),r.a.createElement(h.a,{path:"/feed/:id",component:ut}),r.a.createElement(h.a,{path:"/feed",component:At}),r.a.createElement(h.a,{path:"/cabinet",component:Wt})))):r.a.createElement(Rt,{setUser:a})}var Ht="SET_USER",Pt="LOG_OUT";var Lt=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).isUserLoggedIn=function(){return!0},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){window.gapi.load("auth2",(function(){window.gapi.auth2.init({client_id:"232822822071-1q970aukj04j6cv7p5buinsqs5vn0ks2"}).then(console.log)}))}},{key:"render",value:function(){var e=this.props.actions,t=e.setUser,a=e.logOut,n=(this.props.user||{})._id;return r.a.createElement("div",{className:"App"},r.a.createElement(Ut,{isUserLoggedIn:this.isUserLoggedIn(),logOut:a,setUser:t,userId:n}),r.a.createElement(m.NotificationContainer,null))}}]),t}(n.Component),Bt=Object(p.b)((function(e){return{user:e.userReducer.user}}),(function(e){return{actions:{setUser:function(t){return e(function(e){return{type:Ht,user:e}}(t))},logOut:function(){return e({type:Pt})}}}}))(Lt);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ft={user:{createdThreads:[],email:"tyakymiuk@griddynamics.com",subscribedThreads:[],__v:0,_id:"5dd5afc8246ffd1d8a45e02f"}},Mt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ft,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ht:return{user:t.user};case Pt:return Ft;default:return e}};function zt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Vt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?zt(a,!0).forEach((function(t){Object(L.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):zt(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Yt={threadData:{title:"",text:"",username:"",_id:""},selectedThread:null,threads:[]},Gt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_THREAD_FIELD":var a=t.payload,n=a.field,r=a.value;return Vt({},e,{threadData:Vt({},e.threadData,Object(L.a)({},n,r))});case"SET_SELECTED_THREAD":var i=t.payload;return Vt({},e,{selectedThread:i});case"SET_ALL_THREADS":var o=t.payload;return Vt({},e,{threads:o});case"RESET_THREAD":return Vt({},e,{threadData:Yt.threadData});case"SET_THREAD_DATA":var c=t.payload,s=c.text,l=c._id,u=c.title;return Vt({},e,{threadData:Vt({},e.threadData,{text:s,_id:l,title:u})});case"CHANGE_THREAD":var d=t.payload,m=d.id,h=d.thread,p=Object(dt.a)(e.threads),f=p.findIndex((function(e){return e._id===m}));return p[f]=h,Vt({},e,{threads:p,selectedThread:h});default:return e}},qt={},Jt=Object(k.c)({appReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qt,t=arguments.length>1?arguments[1]:void 0;return t.type,e},userReducer:Mt,threadsReducer:Gt}),Xt=(a(214),a(131)),Zt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||k.d,Qt=Object(k.e)(Jt,Zt(Object(k.a)(Xt.a)));o.a.render(r.a.createElement(ge.a,null,r.a.createElement(p.a,{store:Qt},r.a.createElement(Bt,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},42:function(e,t,a){e.exports={divider:"ThreadAuditComponent_divider__3bYyt",icon:"ThreadAuditComponent_icon__1IRRC",active:"ThreadAuditComponent_active__YvlO0",threadMetaInfo:"ThreadAuditComponent_threadMetaInfo__2o4SZ"}},43:function(e,t,a){e.exports={divider:"CommentComponent_divider__1YV3i",flexWrapper:"CommentComponent_flexWrapper__28BtY",comment:"CommentComponent_comment__1ppli",text:"CommentComponent_text__1Vy4n",leftShift:"CommentComponent_leftShift__1gzR2",btnHolder:"CommentComponent_btnHolder__36xzL",chip:"CommentComponent_chip__2X-gR"}},61:function(e,t,a){e.exports={logoWrapper:"Header_logoWrapper__zM9x7",logo:"Header_logo__3T0lc",verticalDivider:"Header_verticalDivider__20pyc",createThreadWrapper:"Header_createThreadWrapper__1qHT8",searchWrapper:"Header_searchWrapper__1hx1Z",link:"Header_link__1uLZ-"}},65:function(e,t,a){e.exports={threadAuthor:"ThreadAuthorComponent_threadAuthor__2QMkp",threadAuthorBox:"ThreadAuthorComponent_threadAuthorBox__2vu8C",authorInfo:"ThreadAuthorComponent_authorInfo__111gV",role:"ThreadAuthorComponent_role__3I2od"}},66:function(e,t,a){e.exports={buttonContainer:"AllThreadsPage_buttonContainer__28Rzi",iconWrapper:"AllThreadsPage_iconWrapper__3e-AC",active:"AllThreadsPage_active__2GHQU"}}},[[153,1,2]]]);
//# sourceMappingURL=main.d580ffc9.chunk.js.map